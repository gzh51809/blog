## js函数定义和函数表达式的区别？
- 标签： `JavaScript`
- 时间： `2016-4-12`

!> 本文为草稿，后续会重写一遍

### 编译原理

结合编译原理来看，程序中的一段代码在执行之前会经历三个步骤:

1. 词法分析: 将代码分割成词法单元（token）
2. 语法分析: 得到程序语法结构的树
3. 代码生成

由于js是解释型语言，js的编译发生在代码执行前的几微妙。

### 例子

这里结合一个例子来聊一聊：

`function fn1() {  }` 只是一个简单的定义

而`var fn2 = function() {}`, 而实际上进行了两步操作，LHS和RHS，即首先存储一个变量fn，再给这个变量赋一个匿名函数。

- LHS： 当变量出现在赋值操作符的左侧时进行`LHS`操作，
- RHS： 当变量出现在赋值操作符的左侧时进行`RHS`操作, 可以理解为取到源值

首先，而`js`代码的执行分两步：

- 第一步，会首先读取代码中所有变量的声明（包含函数的声明），于是，这就导致出现了`变量提升`，且函数提升的优先级更高。当第一遍的读取结束后，函数声明的那个函数（fn1）已经存在，而函数表达式的那个函数（fn2）还没有赋值成功，作用域内还仅仅存在一个变量（fn2）。

- 第二步，执行，只有在第二步时才会执行赋值操作，因为在这一步中（fn2）的赋值才算真正地成功。

这种差异带来的最大的影响可以通过下述的函数来体现出出来：

```js
fn1() // 不报错
function fn1() {
  
}

fn2() // Uncaught TypeError: fn2 is not a function
var fn2 = function () {
  
}
```

## 收获

了解js的基本编译过程和运行过程，从而可以有效地增强对js语言的理解。同时，了解如何结合变量提升来优化自己的代码结构。